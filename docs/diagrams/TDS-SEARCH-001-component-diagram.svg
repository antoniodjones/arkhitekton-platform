<?xml version="1.0" encoding="UTF-8"?>
<svg width="1400" height="1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #1a202c; }
      .subtitle { font-family: Arial, sans-serif; font-size: 14px; fill: #4a5568; }
      .component { fill: #edf2f7; stroke: #4299e1; stroke-width: 2; }
      .hook { fill: #fff5f5; stroke: #fc8181; stroke-width: 2; }
      .ui-component { fill: #f0fff4; stroke: #48bb78; stroke-width: 2; }
      .util { fill: #fef5e7; stroke: #f6ad55; stroke-width: 2; }
      .external { fill: #e6fffa; stroke: #38b2ac; stroke-width: 2; }
      .label { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #2d3748; }
      .sublabel { font-family: Arial, sans-serif; font-size: 11px; fill: #4a5568; }
      .method { font-family: 'Courier New', monospace; font-size: 10px; fill: #2d3748; }
      .uses { stroke: #2d3748; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .provides { stroke: #48bb78; stroke-width: 2; fill: none; marker-end: url(#arrowhead-green); stroke-dasharray: 5,5; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2d3748" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#48bb78" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="700" y="40" class="title" text-anchor="middle">Global Search - Component Diagram</text>
  <text x="700" y="65" class="subtitle" text-anchor="middle">React Components, Hooks, and Dependencies</text>

  <!-- Main Component: Dashboard -->
  <rect x="50" y="110" width="350" height="280" class="component" rx="8"/>
  <text x="225" y="140" class="label" text-anchor="middle">Dashboard Component</text>
  <text x="225" y="160" class="sublabel" text-anchor="middle">client/src/pages/dashboard.tsx</text>
  
  <!-- Dashboard Responsibilities -->
  <rect x="70" y="180" width="310" height="190" fill="#ffffff" stroke="#cbd5e0" stroke-width="1" rx="4"/>
  <text x="80" y="200" class="sublabel" font-weight="bold">State:</text>
  <text x="90" y="218" class="method">• designOption: 1 | 2 | 3 | 4</text>
  <text x="90" y="233" class="method">• searchInputRef: RefObject&lt;HTMLInputElement&gt;</text>
  
  <text x="80" y="258" class="sublabel" font-weight="bold">Hooks Used:</text>
  <text x="90" y="276" class="method">• useDebouncedSearch()</text>
  <text x="90" y="291" class="method">• useGlobalSearch()</text>
  <text x="90" y="306" class="method">• useSearchShortcut()</text>
  
  <text x="80" y="331" class="sublabel" font-weight="bold">Renders:</text>
  <text x="90" y="349" class="method">• &lt;Input ref={searchInputRef} /&gt;</text>
  <text x="90" y="364" class="method">• &lt;SearchResultCard /&gt; (map results)</text>

  <!-- Hook: useDebouncedSearch -->
  <rect x="470" y="110" width="300" height="160" class="hook" rx="8"/>
  <text x="620" y="140" class="label" text-anchor="middle">useDebouncedSearch Hook</text>
  <text x="620" y="160" class="sublabel" text-anchor="middle">client/src/hooks/use-global-search.ts</text>
  
  <rect x="490" y="180" width="260" height="70" fill="#ffffff" stroke="#cbd5e0" stroke-width="1" rx="4"/>
  <text x="500" y="200" class="sublabel" font-weight="bold">Parameters:</text>
  <text x="510" y="218" class="method">initialValue: string, delayMs: number</text>
  <text x="500" y="240" class="sublabel" font-weight="bold">Returns:</text>
  <text x="510" y="258" class="method">{ value, debouncedValue, setValue }</text>

  <!-- Connection: Dashboard uses useDebouncedSearch -->
  <path d="M 400 200 L 470 200" class="uses"/>
  <text x="435" y="195" class="sublabel">uses</text>

  <!-- Hook: useGlobalSearch -->
  <rect x="470" y="300" width="300" height="200" class="hook" rx="8"/>
  <text x="620" y="330" class="label" text-anchor="middle">useGlobalSearch Hook</text>
  <text x="620" y="350" class="sublabel" text-anchor="middle">client/src/hooks/use-global-search.ts</text>
  
  <rect x="490" y="370" width="260" height="110" fill="#ffffff" stroke="#cbd5e0" stroke-width="1" rx="4"/>
  <text x="500" y="390" class="sublabel" font-weight="bold">Parameters:</text>
  <text x="510" y="408" class="method">query, type?, limit?, offset?</text>
  <text x="500" y="430" class="sublabel" font-weight="bold">Returns:</text>
  <text x="510" y="448" class="method">{ results, grouped, totalResults,</text>
  <text x="510" y="463" class="method">  hasMore, isLoading, isError }</text>

  <!-- Connection: Dashboard uses useGlobalSearch -->
  <path d="M 400 320 L 450 320 L 450 400 L 470 400" class="uses"/>
  <text x="425" y="365" class="sublabel">uses</text>

  <!-- Hook: useSearchShortcut -->
  <rect x="470" y="530" width="300" height="160" class="hook" rx="8"/>
  <text x="620" y="560" class="label" text-anchor="middle">useSearchShortcut Hook</text>
  <text x="620" y="580" class="sublabel" text-anchor="middle">client/src/hooks/use-search-shortcut.ts</text>
  
  <rect x="490" y="600" width="260" height="70" fill="#ffffff" stroke="#cbd5e0" stroke-width="1" rx="4"/>
  <text x="500" y="620" class="sublabel" font-weight="bold">Binds:</text>
  <text x="510" y="638" class="method">Cmd+K / Ctrl+K → onOpen()</text>
  <text x="510" y="653" class="method">Escape → onClose()</text>

  <!-- Connection: Dashboard uses useSearchShortcut -->
  <path d="M 225 390 L 225 450 L 450 450 L 450 610 L 470 610" class="uses"/>
  <text x="350" y="445" class="sublabel">uses</text>

  <!-- UI Component: SearchResultCard -->
  <rect x="820" y="110" width="320" height="220" class="ui-component" rx="8"/>
  <text x="980" y="140" class="label" text-anchor="middle">SearchResultCard Component</text>
  <text x="980" y="160" class="sublabel" text-anchor="middle">client/src/components/search/search-result-card.tsx</text>
  
  <rect x="840" y="180" width="280" height="130" fill="#ffffff" stroke="#cbd5e0" stroke-width="1" rx="4"/>
  <text x="850" y="200" class="sublabel" font-weight="bold">Props:</text>
  <text x="860" y="218" class="method">result: SearchResult</text>
  <text x="860" y="233" class="method">onClick?: () =&gt; void</text>
  <text x="860" y="248" class="method">highlighted?: boolean</text>
  
  <text x="850" y="273" class="sublabel" font-weight="bold">Renders:</text>
  <text x="860" y="291" class="method">• Entity icon (emoji)</text>
  <text x="860" y="306" class="method">• Status &amp; type badges</text>

  <!-- Connection: Dashboard renders SearchResultCard -->
  <path d="M 400 250 L 750 250 L 750 220 L 820 220" class="provides"/>
  <text x="600" y="245" class="sublabel" fill="#48bb78">renders</text>

  <!-- UI Component: SearchResultSkeleton -->
  <rect x="820" y="360" width="320" height="130" class="ui-component" rx="8"/>
  <text x="980" y="390" class="label" text-anchor="middle">SearchResultSkeleton Component</text>
  <text x="980" y="410" class="sublabel" text-anchor="middle">client/src/components/search/search-result-card.tsx</text>
  
  <rect x="840" y="430" width="280" height="40" fill="#ffffff" stroke="#cbd5e0" stroke-width="1" rx="4"/>
  <text x="850" y="450" class="sublabel" font-weight="bold">Renders:</text>
  <text x="860" y="468" class="method">Animated loading placeholder</text>

  <!-- Connection: Dashboard renders SearchResultSkeleton -->
  <path d="M 400 330 L 780 330 L 780 425 L 820 425" class="provides"/>
  <text x="600" y="325" class="sublabel" fill="#48bb78">renders</text>

  <!-- Utility Functions -->
  <rect x="820" y="520" width="320" height="170" class="util" rx="8"/>
  <text x="980" y="550" class="label" text-anchor="middle">Utility Functions</text>
  <text x="980" y="570" class="sublabel" text-anchor="middle">client/src/hooks/use-global-search.ts</text>
  
  <rect x="840" y="590" width="280" height="80" fill="#ffffff" stroke="#cbd5e0" stroke-width="1" rx="4"/>
  <text x="850" y="610" class="sublabel" font-weight="bold">Functions:</text>
  <text x="860" y="628" class="method">getEntityTypeInfo(entityType)</text>
  <text x="860" y="643" class="method">→ { label, icon, color }</text>
  <text x="860" y="665" class="method">getStatusColor(status)</text>

  <!-- Connection: SearchResultCard uses Utilities -->
  <path d="M 980 330 L 980 520" class="uses"/>
  <text x="995" y="430" class="sublabel">uses</text>

  <!-- External Library: React Query -->
  <rect x="820" y="720" width="150" height="120" class="external" rx="8"/>
  <text x="895" y="750" class="label" text-anchor="middle" font-size="12">React Query</text>
  <text x="895" y="770" class="sublabel" text-anchor="middle">@tanstack/react-query</text>
  
  <rect x="840" y="790" width="110" height="30" fill="#ffffff" stroke="#cbd5e0" stroke-width="1" rx="4"/>
  <text x="850" y="810" class="method" font-size="9">useQuery()</text>

  <!-- Connection: useGlobalSearch uses React Query -->
  <path d="M 770 450 L 820 450 L 820 780 L 840 780" class="uses"/>
  <text x="795" y="615" class="sublabel">uses</text>

  <!-- External Library: react-hotkeys-hook -->
  <rect x="990" y="720" width="150" height="120" class="external" rx="8"/>
  <text x="1065" y="750" class="label" text-anchor="middle" font-size="12">react-hotkeys-hook</text>
  <text x="1065" y="770" class="sublabel" text-anchor="middle">npm package</text>
  
  <rect x="1010" y="790" width="110" height="30" fill="#ffffff" stroke="#cbd5e0" stroke-width="1" rx="4"/>
  <text x="1020" y="810" class="method" font-size="9">useHotkeys()</text>

  <!-- Connection: useSearchShortcut uses react-hotkeys-hook -->
  <path d="M 770 630 L 800 630 L 800 780 L 1010 780" class="uses"/>
  <text x="885" y="625" class="sublabel">uses</text>

  <!-- External Library: Wouter -->
  <rect x="1180" y="110" width="150" height="120" class="external" rx="8"/>
  <text x="1255" y="140" class="label" text-anchor="middle" font-size="12">Wouter</text>
  <text x="1255" y="160" class="sublabel" text-anchor="middle">React Router</text>
  
  <rect x="1200" y="180" width="110" height="30" fill="#ffffff" stroke="#cbd5e0" stroke-width="1" rx="4"/>
  <text x="1210" y="200" class="method" font-size="9">&lt;Link /&gt;</text>

  <!-- Connection: SearchResultCard uses Wouter -->
  <path d="M 1140 180 L 1180 180" class="uses"/>
  <text x="1150" y="175" class="sublabel">uses</text>

  <!-- TypeScript Interfaces -->
  <rect x="50" y="450" width="350" height="250" class="util" rx="8"/>
  <text x="225" y="480" class="label" text-anchor="middle">TypeScript Interfaces</text>
  
  <rect x="70" y="500" width="310" height="180" fill="#ffffff" stroke="#cbd5e0" stroke-width="1" rx="4"/>
  <text x="80" y="520" class="method" font-weight="bold">interface SearchResult {</text>
  <text x="90" y="538" class="method">  id: string;</text>
  <text x="90" y="553" class="method">  entityType: 'user_story' | 'epic' | ...;</text>
  <text x="90" y="568" class="method">  title: string;</text>
  <text x="90" y="583" class="method">  description?: string;</text>
  <text x="90" y="598" class="method">  status: string;</text>
  <text x="90" y="613" class="method">  score: number;</text>
  <text x="90" y="628" class="method">  url: string;</text>
  <text x="90" y="643" class="method">  metadata?: Record&lt;string, any&gt;;</text>
  <text x="80" y="665" class="method">}</text>

  <!-- Connection: Interfaces to Components -->
  <path d="M 225 450 L 225 390" class="uses" stroke-dasharray="3,3"/>
  <text x="240" y="425" class="sublabel">defines</text>

  <path d="M 400 600 L 820 260" class="uses" stroke-dasharray="3,3"/>
  <text x="610" y="430" class="sublabel">uses</text>

  <!-- API Boundary -->
  <rect x="50" y="750" width="720" height="180" fill="#fef5e7" stroke="#f6ad55" stroke-width="3" rx="8"/>
  <text x="410" y="780" class="label" text-anchor="middle">API Boundary</text>
  <text x="410" y="800" class="sublabel" text-anchor="middle">GET /api/entities/search</text>
  
  <rect x="70" y="820" width="330" height="90" fill="#ffffff" stroke="#cbd5e0" stroke-width="1" rx="4"/>
  <text x="80" y="840" class="sublabel" font-weight="bold">Request:</text>
  <text x="90" y="858" class="method">?q=wiki-rtf&amp;limit=10&amp;offset=0</text>
  
  <text x="80" y="883" class="sublabel" font-weight="bold">Authentication:</text>
  <text x="90" y="901" class="method">Session cookie (implicit)</text>

  <rect x="420" y="820" width="330" height="90" fill="#ffffff" stroke="#cbd5e0" stroke-width="1" rx="4"/>
  <text x="430" y="840" class="sublabel" font-weight="bold">Response (200 OK):</text>
  <text x="440" y="858" class="method">{ query, totalResults, limit,</text>
  <text x="440" y="873" class="method">  offset, hasMore, results[],</text>
  <text x="440" y="888" class="method">  grouped: {...} }</text>

  <!-- Connection: useGlobalSearch → API -->
  <path d="M 620 500 L 620 700 L 410 700 L 410 820" class="uses"/>
  <text x="515" y="695" class="sublabel">HTTP GET</text>

  <!-- Legend -->
  <rect x="1180" y="260" width="200" height="420" fill="#f9fafb" stroke="#cbd5e0" stroke-width="2" rx="8"/>
  <text x="1280" y="285" class="label" text-anchor="middle">Legend</text>

  <rect x="1200" y="300" width="100" height="40" class="component" rx="4"/>
  <text x="1315" y="325" class="sublabel">React Component</text>

  <rect x="1200" y="355" width="100" height="40" class="hook" rx="4"/>
  <text x="1315" y="380" class="sublabel">Custom Hook</text>

  <rect x="1200" y="410" width="100" height="40" class="ui-component" rx="4"/>
  <text x="1315" y="435" class="sublabel">UI Component</text>

  <rect x="1200" y="465" width="100" height="40" class="util" rx="4"/>
  <text x="1315" y="490" class="sublabel">Utility / Type</text>

  <rect x="1200" y="520" width="100" height="40" class="external" rx="4"/>
  <text x="1315" y="545" class="sublabel">External Library</text>

  <line x1="1200" y1="580" x2="1300" y2="580" class="uses"/>
  <text x="1315" y="585" class="sublabel">Uses / Depends</text>

  <line x1="1200" y1="610" x2="1300" y2="610" class="provides"/>
  <text x="1315" y="615" class="sublabel" fill="#48bb78">Provides / Renders</text>

  <line x1="1200" y1="640" x2="1300" y2="640" class="uses" stroke-dasharray="3,3"/>
  <text x="1315" y="645" class="sublabel">Type Dependency</text>
</svg>

